{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sean\\\\Documents\\\\Web Projects\\\\issue-tracker\\\\web\\\\src\\\\components\\\\TicketDetails.js\";\nimport React, { useState } from 'react';\nimport TicketNotes from \"./TicketNotes\";\nimport styled from \"styled-components\";\nimport { FaEdit } from 'react-icons/fa';\nexport default function TicketDetails({\n  data,\n  index\n}) {\n  const [isEdited, setIsEdited] = useState(false);\n  const [state, setState] = useState({\n    ticketPriority: \"\",\n    ticketType: \"\",\n    ticketStatus: \"\",\n    ticketComment: \"\"\n  });\n\n  function useForceUpdate() {\n    const [value, setValue] = useState(0); // integer state\n\n    return () => setValue(value => ++value); // update the state to force render\n  }\n\n  function handleChange(event) {\n    setState({ ...state,\n      [event.target.name]: event.target.value\n    });\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    const arr = [];\n    const firstName = sessionStorage.getItem(\"firstName\");\n    const lastName = sessionStorage.getItem(\"lastName\");\n    const fullName = `${firstName} ${lastName}`; // verify if each input is different\n    // if an input is different add object of data to an array\n\n    if (data.ticketType !== state.ticketType && state.ticketType !== \"\") {\n      arr.push({\n        user: fullName,\n        propertyChanged: \"Ticket Type\",\n        oldValue: data.ticketType,\n        newValue: state.ticketType\n      });\n    }\n\n    if (data.ticketStatus !== state.ticketStatus && state.ticketStatus !== \"\") {\n      arr.push({\n        user: fullName,\n        propertyChanged: \"Ticket Status\",\n        oldValue: data.ticketStatus,\n        newValue: state.ticketStatus\n      });\n    }\n\n    if (data.ticketPriority !== state.ticketPriority && state.ticketPriority !== \"\") {\n      arr.push({\n        user: fullName,\n        propertyChanged: \"Ticket Priority\",\n        oldValue: data.ticketPriority,\n        newValue: state.ticketPriority\n      });\n    } // iterate through array of objects and send each item to API end point\n\n\n    for (let i = 0; i < arr.length; i++) {\n      await fetch(\"/api/v1/tickethistory\", {\n        method: \"PUT\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id: data._id,\n          user: arr[i].user,\n          propertyChanged: arr[i].propertyChanged,\n          oldValue: arr[i].oldValue,\n          newValue: arr[i].newValue\n        })\n      });\n    } // after complettion set isEdited to false\n\n\n    setIsEdited(false);\n  }\n\n  async function submitComment() {\n    const firstName = sessionStorage.getItem(\"firstName\");\n    const lastName = sessionStorage.getItem(\"lastName\");\n    const fullName = `${firstName} ${lastName}`;\n    await fetch(\"/api/v1/ticketcomment\", {\n      method: \"PUT\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: data._id,\n        user: fullName,\n        comment: state.ticketComment\n      })\n    });\n    setState({\n      ticketComment: \"\"\n    });\n    useForceUpdate();\n  }\n\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ticketInfo\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ticketTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, data.title), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => setIsEdited(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FaEdit, {\n    style: {\n      marginTop: \".25rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), \"Edit\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"infoItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, \"Assigned To\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, data.assignedDev)), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"infoItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, \"Created By\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, data.submitter))), isEdited ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"infoItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"ticketType\",\n    value: state.ticketType,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 19\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Bug\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 19\n    }\n  }, \"Bug\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"New Feature\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, \"New Feature\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Improvement\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, \"Improvement\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Task\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, \"Task\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Testing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 19\n    }\n  }, \"Testing\"))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"infoItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"ticketStatus\",\n    value: state.ticketStatus,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Open\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  }, \"Open\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Resolved\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, \"Resolved\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Closed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, \"Closed\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Reopened\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, \"Reopened\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"In Progress\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, \"In Progress\"))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"infoItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, \"Priority\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"ticketPriority\",\n    value: state.ticketPriority,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Lowest\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, \"Lowest\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Low\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }, \"Low\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 19\n    }\n  }, \"Medium\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"High\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }, \"High\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Highest\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }, \"Highest\"))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    className: \"submitBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, \"Submit\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"infoItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, data.ticketType)), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"infoItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, data.ticketStatus)), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"infoItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, \"Priority\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }, data.ticketPriority)))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }, data.description)), /*#__PURE__*/React.createElement(TicketNotes, {\n    data: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ticketComment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    name: \"ticketComment\",\n    value: state.ticketComment,\n    onChange: handleChange,\n    cols: \"30\",\n    rows: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: submitComment,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, \"Submit\")));\n}\nconst Wrapper = styled.div`\nbackground: white;\nborder-left: 1px solid #ccc;\n\n.ticketTitle {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  h2{\n    margin-left: .25rem;\n  }\n  span{\n    cursor: pointer;\n    margin-right: 2rem; \n    padding: .5rem;\n    color: white;\n    background: #EB7012;\n    border-radius: 5px;\n  }\n}\n\n.description{\n  padding-top: .5rem;\n}\n.infoItem{\n  ${''\n/* margin: .5rem 0; */\n}\n  padding: .5rem;\n  \n p:nth-child(1) {\n   text-transform: uppercase;\n   color: #ABB1B6;\n   font-weight: 500;\n   padding-bottom: .25rem;\n }\n}\n.info{\n  display: flex;\n  flex-direction: column-reverse;\n  justify-content: space-between;\n  border-bottom: solid 1px #ddd;\n  margin: 0 1rem;\n  div{\n    display: flex;\n    justify-content: space-between;\n  }\n  select{\n    border: 1px solid black;\n  }\n  .submitBtn{\n    width: 8rem;\n    padding: .5rem;\n    margin: .5rem;\n    background: #EB7012;\n    color: white;\n    border-radius: 5px;\n}\n}\n.ticketInfo{\n  margin: .5rem;\n  h2{\n  padding: 0.5rem 0;\n  }\n}\n\n.ticketComment {\n  display: flex;\n  flex-direction: column;\n  width: 40rem;\n  margin: 0 1rem ;\n\ninput[type=text] {\n  \n  height: 5rem;\n  border: solid 1px black;\n}\n\ntextarea {\n  border: solid 1px black;\n}\n\nbutton {\n  margin-top: .5rem;\n  padding: .5rem;\n  width: 6rem;\n  background: #EB7012;\n  color: white;\n  border-radius: 5px;\n}\n}\n`;","map":{"version":3,"sources":["C:/Users/Sean/Documents/Web Projects/issue-tracker/web/src/components/TicketDetails.js"],"names":["React","useState","TicketNotes","styled","FaEdit","TicketDetails","data","index","isEdited","setIsEdited","state","setState","ticketPriority","ticketType","ticketStatus","ticketComment","useForceUpdate","value","setValue","handleChange","event","target","name","handleSubmit","preventDefault","arr","firstName","sessionStorage","getItem","lastName","fullName","push","user","propertyChanged","oldValue","newValue","i","length","fetch","method","mode","headers","body","JSON","stringify","id","_id","submitComment","comment","title","marginTop","assignedDev","submitter","description","Wrapper","div"],"mappings":"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Q,EAAEI,YAArE;AAAmF,IAAA,IAAI,EAAC,IAAxF;AAA6F,IAAA,IAAI,EAAC,IAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAQ,IAAA,OAAO,EAAE4B,aAAjB;AAAgC,IAAA,IAAI,EAAC,QAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,CA3FF,CADF;AAiGD;AAID,MAAMO,OAAO,GAAGnD,MAAM,CAACoD,GAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AAAG;AAAuB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAzFA","sourcesContent":["import React, { useState } from 'react'\r\nimport TicketNotes from \"./TicketNotes\"\r\nimport styled from \"styled-components\"\r\nimport { FaEdit } from 'react-icons/fa';\r\n\r\nexport default function TicketDetails({ data, index }) {\r\n  const [isEdited, setIsEdited] = useState(false)\r\n  const [state, setState] = useState({\r\n    ticketPriority: \"\",\r\n    ticketType: \"\",\r\n    ticketStatus: \"\",\r\n    ticketComment: \"\"\r\n  })\r\n\r\n  function useForceUpdate() {\r\n    const [value, setValue] = useState(0); // integer state\r\n    return () => setValue(value => ++value); // update the state to force render\r\n  }\r\n\r\n  function handleChange(event) {\r\n    setState({\r\n      ...state,\r\n      [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault()\r\n    const arr = []\r\n    const firstName = sessionStorage.getItem(\"firstName\")\r\n    const lastName = sessionStorage.getItem(\"lastName\")\r\n    const fullName = `${firstName} ${lastName}`\r\n    // verify if each input is different\r\n    // if an input is different add object of data to an array\r\n    if (data.ticketType !== state.ticketType && state.ticketType !== \"\") {\r\n      arr.push({\r\n        user: fullName,\r\n        propertyChanged: \"Ticket Type\",\r\n        oldValue: data.ticketType,\r\n        newValue: state.ticketType\r\n      })\r\n    }\r\n    if (data.ticketStatus !== state.ticketStatus && state.ticketStatus !== \"\") {\r\n      arr.push({\r\n        user: fullName,\r\n        propertyChanged: \"Ticket Status\",\r\n        oldValue: data.ticketStatus,\r\n        newValue: state.ticketStatus\r\n      })\r\n    }\r\n    if (data.ticketPriority !== state.ticketPriority && state.ticketPriority !== \"\") {\r\n      arr.push({\r\n        user: fullName,\r\n        propertyChanged: \"Ticket Priority\",\r\n        oldValue: data.ticketPriority,\r\n        newValue: state.ticketPriority\r\n      })\r\n    }\r\n    // iterate through array of objects and send each item to API end point\r\n    for (let i = 0; i < arr.length; i++) {\r\n      await fetch(\"/api/v1/tickethistory\", {\r\n        method: \"PUT\",\r\n        mode: \"cors\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: data._id,\r\n          user: arr[i].user,\r\n          propertyChanged: arr[i].propertyChanged,\r\n          oldValue: arr[i].oldValue,\r\n          newValue: arr[i].newValue\r\n        })\r\n      })\r\n    }\r\n    // after complettion set isEdited to false\r\n    setIsEdited(false)\r\n\r\n  }\r\n\r\n  async function submitComment() {\r\n    const firstName = sessionStorage.getItem(\"firstName\")\r\n    const lastName = sessionStorage.getItem(\"lastName\")\r\n    const fullName = `${firstName} ${lastName}`\r\n    await fetch(\"/api/v1/ticketcomment\", {\r\n      method: \"PUT\",\r\n      mode: \"cors\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        id: data._id,\r\n        user: fullName,\r\n        comment: state.ticketComment\r\n      })\r\n    })\r\n    setState({ ticketComment: \"\" })\r\n    useForceUpdate()\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <div className=\"ticketInfo\" key={index}>\r\n        <div className=\"ticketTitle\">\r\n          <h2>{data.title}</h2>\r\n          <span onClick={() => setIsEdited(true)}>\r\n            <FaEdit style={{ marginTop: \".25rem\" }} />\r\n          Edit\r\n          </span>\r\n        </div>\r\n        <div className=\"info\">\r\n          <div>\r\n            <section className=\"infoItem\">\r\n              <p>Assigned To</p>\r\n              <p>{data.assignedDev}</p>\r\n            </section>\r\n            <section className=\"infoItem\">\r\n              <p>Created By</p>\r\n              <p>{data.submitter}</p>\r\n            </section>\r\n          </div>\r\n\r\n          {isEdited ?\r\n            <div>\r\n              <section className=\"infoItem\">\r\n                <p>Type</p>\r\n                <select\r\n                  name=\"ticketType\"\r\n                  value={state.ticketType}\r\n                  onChange={handleChange}\r\n                >\r\n                  <option value=\"\">-</option>\r\n                  <option value=\"Bug\">Bug</option>\r\n                  <option value=\"New Feature\">New Feature</option>\r\n                  <option value=\"Improvement\">Improvement</option>\r\n                  <option value=\"Task\">Task</option>\r\n                  <option value=\"Testing\">Testing</option>\r\n                </select>\r\n              </section>\r\n              <section className=\"infoItem\">\r\n                <p>Status</p>\r\n                <select\r\n                  name=\"ticketStatus\"\r\n                  value={state.ticketStatus}\r\n                  onChange={handleChange}\r\n                >\r\n                  <option value=\"\">-</option>\r\n                  <option value=\"Open\">Open</option>\r\n                  <option value=\"Resolved\">Resolved</option>\r\n                  <option value=\"Closed\">Closed</option>\r\n                  <option value=\"Reopened\">Reopened</option>\r\n                  <option value=\"In Progress\">In Progress</option>\r\n                </select>\r\n              </section>\r\n              <section className=\"infoItem\">\r\n                <p>Priority</p>\r\n                <select\r\n                  name=\"ticketPriority\"\r\n                  value={state.ticketPriority}\r\n                  onChange={handleChange}\r\n                >\r\n                  <option value=\"\">-</option>\r\n                  <option value=\"Lowest\">Lowest</option>\r\n                  <option value=\"Low\">Low</option>\r\n                  <option value=\"Medium\">Medium</option>\r\n                  <option value=\"High\">High</option>\r\n                  <option value=\"Highest\">Highest</option>\r\n                </select>\r\n              </section>\r\n              <button onClick={handleSubmit} className=\"submitBtn\">Submit</button>\r\n            </div>\r\n            :\r\n            <div>\r\n              <section className=\"infoItem\">\r\n                <p>Type</p>\r\n                <p>{data.ticketType}</p>\r\n              </section>\r\n              <section className=\"infoItem\">\r\n                <p>Status</p>\r\n                <p>{data.ticketStatus}</p>\r\n              </section>\r\n              <section className=\"infoItem\">\r\n                <p>Priority</p>\r\n                <p>{data.ticketPriority}</p>\r\n              </section>\r\n            </div>\r\n          }\r\n        </div>\r\n\r\n        <p className=\"description\">{data.description}</p>\r\n      </div >\r\n      <TicketNotes data={data} />\r\n      <div className=\"ticketComment\">\r\n        <textarea name=\"ticketComment\" value={state.ticketComment} onChange={handleChange} cols=\"30\" rows=\"10\" />\r\n        <button onClick={submitComment} type=\"submit\">Submit</button>\r\n      </div>\r\n    </Wrapper>)\r\n}\r\n\r\n\r\n\r\nconst Wrapper = styled.div`\r\nbackground: white;\r\nborder-left: 1px solid #ccc;\r\n\r\n.ticketTitle {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  h2{\r\n    margin-left: .25rem;\r\n  }\r\n  span{\r\n    cursor: pointer;\r\n    margin-right: 2rem; \r\n    padding: .5rem;\r\n    color: white;\r\n    background: #EB7012;\r\n    border-radius: 5px;\r\n  }\r\n}\r\n\r\n.description{\r\n  padding-top: .5rem;\r\n}\r\n.infoItem{\r\n  ${'' /* margin: .5rem 0; */}\r\n  padding: .5rem;\r\n  \r\n p:nth-child(1) {\r\n   text-transform: uppercase;\r\n   color: #ABB1B6;\r\n   font-weight: 500;\r\n   padding-bottom: .25rem;\r\n }\r\n}\r\n.info{\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n  justify-content: space-between;\r\n  border-bottom: solid 1px #ddd;\r\n  margin: 0 1rem;\r\n  div{\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  select{\r\n    border: 1px solid black;\r\n  }\r\n  .submitBtn{\r\n    width: 8rem;\r\n    padding: .5rem;\r\n    margin: .5rem;\r\n    background: #EB7012;\r\n    color: white;\r\n    border-radius: 5px;\r\n}\r\n}\r\n.ticketInfo{\r\n  margin: .5rem;\r\n  h2{\r\n  padding: 0.5rem 0;\r\n  }\r\n}\r\n\r\n.ticketComment {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 40rem;\r\n  margin: 0 1rem ;\r\n\r\ninput[type=text] {\r\n  \r\n  height: 5rem;\r\n  border: solid 1px black;\r\n}\r\n\r\ntextarea {\r\n  border: solid 1px black;\r\n}\r\n\r\nbutton {\r\n  margin-top: .5rem;\r\n  padding: .5rem;\r\n  width: 6rem;\r\n  background: #EB7012;\r\n  color: white;\r\n  border-radius: 5px;\r\n}\r\n}\r\n`"]},"metadata":{},"sourceType":"module"}