{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sean\\\\Documents\\\\Web Projects\\\\issue-tracker\\\\web\\\\src\\\\pages\\\\Login.js\";\nimport React, { useState } from 'react';\nimport { Link, useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nexport default function Login() {\n  let history = useHistory();\n  const [state, setState] = useState({\n    email: \"\",\n    password: \"\",\n    error: \"\"\n  });\n\n  function handleChange(event) {\n    setState({ ...state,\n      [event.target.name]: event.target.value\n    });\n    event.preventDefault();\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    const response = await fetch(\"/api/v1/users/login\", {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: state.email,\n        password: state.password\n      })\n    });\n\n    if (response.status === 400) {\n      const json = await response.json();\n      setState({\n        error: json.error,\n        email: \"\",\n        password: \"\"\n      });\n    }\n\n    if (response.status === 200) {\n      const json = await response.json();\n      sessionStorage.setItem(\"token\", json.token);\n      sessionStorage.setItem(\"firstName\", json.firstName);\n      sessionStorage.setItem(\"lastName\", json.lastName);\n      history.push(\"/tickets\");\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(LoginWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LoginForm, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }, \"Issue Tracker\"), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, state.error), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"email\",\n    type: \"text\",\n    placeholder: \"Email\",\n    value: state.email,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    value: state.password,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginLinks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, \"Don't have an account?\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 47\n    }\n  }, \" Register User\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, \"Login as a Demo User \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/demo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 46\n    }\n  }, \" Click Here\")))));\n}\nconst LoginWrapper = styled.div`\nbackground:#128DEB;\nheight: 100vh;\nwidth: 100%;\n\n`;\nconst LoginForm = styled.form`\n    position: absolute;\n    top: 10%;\n    margin-left: auto;\n    margin-right: auto;\n    left: 0;\n    right: 0;\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    background: white;\n    width: 30rem;\n    padding: 2rem 0;\n \n  \n  h1{\n    text-align: center;\n    color: #0d62a4;\n    padding-bottom: .5rem;  \n  }\n\n  h4{\n      color: red;\n  }\n  \n  input {\n    width: 20rem;\n    margin: 0.5rem 0;\n    padding: 1rem 0;\n    text-align: center;\n  border: 1px solid black;\n  }\n  input[type=\"submit\"] {\n      margin-top: .75rem;\n    width: 5rem;\n    background: #eb7012;\n    color: white;\n  }\n  .loginLinks {\n      padding: .5rem 0;\n  }\n  .loginLinks p {\n      padding: .25rem 0;\n  }\n`;","map":{"version":3,"sources":["C:/Users/Sean/Documents/Web Projects/issue-tracker/web/src/pages/Login.js"],"names":["React","useState","Link","useHistory","styled","Login","history","state","setState","email","password","error","handleChange","event","target","name","value","preventDefault","handleSubmit","response","fetch","method","mode","headers","body","JSON","stringify","status","json","sessionStorage","setItem","token","firstName","lastName","push","LoginWrapper","div","LoginForm","form"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nexport default function Login() {\r\n    let history = useHistory()\r\n    const [state, setState] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n        error: \"\",\r\n\r\n    })\r\n    function handleChange(event) {\r\n        setState({\r\n            ...state,\r\n            [event.target.name]: event.target.value\r\n        })\r\n        event.preventDefault()\r\n    }\r\n\r\n    async function handleSubmit(event) {\r\n        event.preventDefault()\r\n        const response = await fetch(\"/api/v1/users/login\", {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                email: state.email,\r\n                password: state.password\r\n            }),\r\n        })\r\n        if (response.status === 400) {\r\n            const json = await response.json()\r\n            setState({\r\n                error: json.error,\r\n                email: \"\",\r\n                password: \"\"\r\n            })\r\n        }\r\n        if (response.status === 200) {\r\n            const json = await response.json()\r\n            sessionStorage.setItem(\"token\", json.token);\r\n            sessionStorage.setItem(\"firstName\", json.firstName);\r\n            sessionStorage.setItem(\"lastName\", json.lastName);\r\n            history.push(\"/tickets\");\r\n        }\r\n    }\r\n    return (\r\n        <LoginWrapper>\r\n            <LoginForm onSubmit={handleSubmit}>\r\n                <h1>Issue Tracker</h1>\r\n                <h4>{state.error}</h4>\r\n                <input\r\n                    name=\"email\"\r\n                    type=\"text\"\r\n                    placeholder=\"Email\"\r\n                    value={state.email}\r\n                    onChange={handleChange}\r\n                />\r\n\r\n                <input\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    value={state.password}\r\n                    onChange={handleChange}\r\n                />\r\n\r\n                <input type=\"submit\" value=\"Submit\" />\r\n                <div className=\"loginLinks\">\r\n                    <p>\r\n                        Don't have an account?<Link to=\"/register\"> Register User</Link>\r\n                    </p>\r\n                    <p>\r\n                        Login as a Demo User <Link to=\"/demo\"> Click Here</Link>\r\n                    </p>\r\n                </div>\r\n            </LoginForm>\r\n        </LoginWrapper>\r\n    )\r\n}\r\n\r\nconst LoginWrapper = styled.div`\r\nbackground:#128DEB;\r\nheight: 100vh;\r\nwidth: 100%;\r\n\r\n`\r\n\r\nconst LoginForm = styled.form`\r\n    position: absolute;\r\n    top: 10%;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    left: 0;\r\n    right: 0;\r\n    align-items: center;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: white;\r\n    width: 30rem;\r\n    padding: 2rem 0;\r\n \r\n  \r\n  h1{\r\n    text-align: center;\r\n    color: #0d62a4;\r\n    padding-bottom: .5rem;  \r\n  }\r\n\r\n  h4{\r\n      color: red;\r\n  }\r\n  \r\n  input {\r\n    width: 20rem;\r\n    margin: 0.5rem 0;\r\n    padding: 1rem 0;\r\n    text-align: center;\r\n  border: 1px solid black;\r\n  }\r\n  input[type=\"submit\"] {\r\n      margin-top: .75rem;\r\n    width: 5rem;\r\n    background: #eb7012;\r\n    color: white;\r\n  }\r\n  .loginLinks {\r\n      padding: .5rem 0;\r\n  }\r\n  .loginLinks p {\r\n      padding: .25rem 0;\r\n  }\r\n`;\r\n\r\n"]},"metadata":{},"sourceType":"module"}